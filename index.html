
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
    <title>Google Maps Javascript API v3 Example: Link To This Page</title> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
<style type="text/css">
html, body { height: 100%; } 
</style>
    <script type="text/javascript">
    //<![CDATA[
      // Before we go looking for the passed parameters, set some defaults
      // in case there are no patameters
      var lat = 0;
      var lng = 0;
      var zoom = 17;
      var maptype = google.maps.MapTypeId.ROADMAP;
var map = null;    

/*  function MapTypeId2UrlValue(maptype) {
    var urlValue = 'm';
    switch(maptype){
      case google.maps.MapTypeId.HYBRID:    urlValue='h';
                        break;
      case google.maps.MapTypeId.SATELLITE: urlValue='k';
                        break;
      case google.maps.MapTypeId.TERRAIN:   urlValue='t';
                        break;
      default:
      case google.maps.MapTypeId.ROADMAP:   urlValue='m';
                        break;
    }
    return urlValue;
  }
*/
      // ========== This function will create the "link to this page"
/*      function makeLink() {
        var a="http://www.geocodezip.com/v3_MW_example_linktothis.html" 
           + "?lat=" + map.getCenter().lat().toFixed(6)
           + "&lng=" + map.getCenter().lng().toFixed(6)
           + "&zoom=" + map.getZoom()
           + "&type=" + MapTypeId2UrlValue(map.getMapTypeId());
        document.getElementById("link").innerHTML = '<a href="' +a+ '">Link to this page<\/a>';
      }
*/
  function initialize() {

      // ========== Read paramaters that have been passed in ==========
      

      // If there are any parameters at eh end of the URL, they will be in  location.search
      // looking something like  "?lat=50&lng=-3&zoom=10&type=h"

      // skip the first character, we are not interested in the "?"
      var query = location.search.substring(1);

      // split the rest at each "&" character to give a list of  "argname=value"  pairs
      var pairs = query.split("&");
      for (var i=0; i<pairs.length; i++) {
        // break each pair at the first "=" to obtain the argname and value
	var pos = pairs[i].indexOf("=");
	var argname = pairs[i].substring(0,pos).toLowerCase();
	var value = pairs[i].substring(pos+1).toLowerCase();
        // alert("argname="+argname+" ,value="+value);
        // process each possible argname
        if (argname == "lat") {lat = parseFloat(value);}
        if (argname == "lng") {lng = parseFloat(value);}
 //       if (argname == "zoom") {zoom = parseInt(value);}
 //       if (argname == "type") {
// from the v3 documentation 8/24/2010
// HYBRID This map type displays a transparent layer of major streets on satellite images. 
// ROADMAP This map type displays a normal street map. 
// SATELLITE This map type displays satellite images. 
// TERRAIN This map type displays maps with physical features such as terrain and vegetation. 
/*          if (value == "m") {maptype = google.maps.MapTypeId.ROADMAP;}
          if (value == "k") {maptype = google.maps.MapTypeId.SATELLITE;}
          if (value == "h") {maptype = google.maps.MapTypeId.HYBRID;}
          if (value == "t") {maptype = google.maps.MapTypeId.TERRAIN;}

        }
*/      }

      // ========== Create the map using the information obtained above ========
    var myOptions = {
      zoom: zoom,
      center: new google.maps.LatLng(lat,lng),
      mapTypeId: maptype
    }
    map = new google.maps.Map(document.getElementById("map"), myOptions);

      // Make the link the first time when the page opens
/*      makeLink();

      // Make the link again whenever the map changes
      google.maps.event.addListener(map, 'maptypeid_changed', makeLink);
      google.maps.event.addListener(map, 'center_changed', makeLink);
      google.maps.event.addListener(map, 'bounds_changed', makeLink);
      google.maps.event.addListener(map, 'zoom_changed', makeLink);
*/    }
    

    // This Javascript is based on code provided by the
    // Community Church Javascript Team
    // http://www.bisphamchurch.org.uk/   
    // http://econym.org.uk/gmap/
    // from the v2 tutorial page at:
    // http://econym.org.uk/gmap/example_linktothis.htm
    //]]>
    </script>
  </head>
<body style="margin:0px; padding:0px;" onload="initialize()"> 


    <div id="map" style="width: 550px; height: 450px"></div>
    <div id="link"></div>


    <noscript><b>JavaScript must be enabled in order for you to use Google Maps.</b> 
      However, it seems JavaScript is either disabled or not supported by your browser. 
      To view Google Maps, enable JavaScript by changing your browser options, and then 
      try again.
    </noscript>
<!--<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
-->
<script type="text/javascript">
_uacct = "UA-162157-1";
urchinTracker();
</script>
  </body>

</html>
